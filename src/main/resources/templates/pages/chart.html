<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feelio</title>

    <!-- ê¸°ë³¸ ìŠ¤íƒ€ì¼ -->
    <link rel="stylesheet" href="/static/css/base.css">
    <!-- í° ìŠ¤íƒ€ì¼ -->
    <link rel="stylesheet" href="/static/css/phone-style.css">
    <!-- í”„ë ˆì„ ìŠ¤íƒ€ì¼ -->
    <link rel="stylesheet" href="/static/css/phone-frame.css">
    <!-- ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ -->
    <link rel="stylesheet" href="/static/css/scrollbar-style.css">

    <link rel="stylesheet" href="/static/css/app-content.css">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
            position: relative;
        }
        .scrollable-content {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 150px; /* ë²„íŠ¼/ë©”ë‰´ë°”ê°€ ì•ˆ ê°€ë¦¬ë„ë¡ ì—¬ìœ  ì¤Œ */
        }
        .chart-container {
            padding: 20px;
            margin: 20px 18px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-neumorphic);
            border: 1px solid rgba(224, 230, 255, 0.7);
        }
        .chart-container h3 {
            text-align: center;
            font-family: 'GmarketSans', sans-serif;
            font-size: 16px;
            color: var(--primary-color);
            margin-bottom: 16px;
        }
        .toggle-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 0 18px 16px;
        }
        .toggle-buttons button {
            padding: 8px 16px;
            font-size: 14px;
            font-family: 'GmarketSans', sans-serif;
            border-radius: 20px;
            border: 1px solid var(--primary-color);
            background-color: white;
            color: var(--primary-color);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .toggle-buttons button.active {
            background-color: var(--primary-color);
            color: white;
        }
        .mood-stability {
            display: flex;
            justify-content: space-between;
            gap: 12px;
            margin: 20px 18px;
            padding: 20px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-neumorphic);
            border: 1px solid rgba(224, 230, 255, 0.7);
        }
        .mood-stability canvas {
            flex: 1;
        }
        .mood-stability .left, .mood-stability .right {
            flex: 1;
            position: relative;
        }
        .mood-stability h4 {
            font-family: 'GmarketSans', sans-serif;
            font-size: 14px;
            margin-bottom: 10px;
            color: var(--primary-color);
            text-align: center;
        }
        .mood-score-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 18px;
            font-weight: bold;
            color: var(--primary-color);
            font-family: 'GmarketSans', sans-serif;
            pointer-events: none;
        }
        .mood-trigger-section {
            margin: 20px 18px;
            padding: 20px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-neumorphic);
            border: 1px solid rgba(224, 230, 255, 0.7);
        }

        .mood-trigger-section h4 {
            font-size: 15px;
            font-family: 'GmarketSans', sans-serif;
            margin: 20px 0 10px;
            color: var(--primary-color);
        }

        .trigger-list {
            display: flex;
            gap: 14px;
            overflow-x: auto;
            padding-bottom: 10px;
            margin-right: -6px; /* ìŠ¤í¬ë¡¤ ëì´ ë„ˆë¬´ ì˜ë¦¬ì§€ ì•Šë„ë¡ */
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
        }

        .trigger-item {
            flex: 0 0 auto;
            width: 90px;
            text-align: center;
            font-size: 13px;
            font-family: 'S-CoreDream', sans-serif;
            color: var(--text-color);
            scroll-snap-align: start;
        }

        .trigger-image-container {
            position: relative;
            width: 90px;
            height: 90px;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .trigger-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .trigger-count {
            position: absolute;
            top: 6px;
            right: 6px;
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            font-size: 12px;
            font-weight: bold;
            padding: 2px 6px;
            border-radius: 12px;
        }

        .menu-bar {
            position: absolute;
            bottom: 70px;
            left: 0;
            right: 0;
            height: 65px;
            background-color: white;
            display: flex;
            justify-content: space-around;
            align-items: center;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.06);
            border-top: 1px solid #f0f0f0;
        }
        .menu-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #aaa;
            font-size: 11px;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 8px 0;
            cursor: pointer;
        }
        .menu-item.active {
            color: #007BFF;
        }
        .menu-icon {
            font-size: 22px;
            margin-bottom: 4px;
        }
        .new-diary-button {
            position: absolute;
            bottom: 140px;
            right: 30px;
            width: 50px;
            height: 50px;
            border-radius: 25px;
            background: linear-gradient(135deg, #007BFF, #00a1ff);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.4);
            z-index: 10;
            border: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .new-diary-button:active {
            transform: scale(0.92);
        }
        canvas { max-width: 100%; }
    </style>
</head>
<body>
<!-- í”„ë ˆì„ ì»¨í…Œì´ë„ˆ - í•­ìƒ ìµœìƒìœ„ì— ìœ„ì¹˜ -->
<div class="frame-container">
    <div class="phone-frame"></div>
</div>

<div class="phone-container">
    <div class="notch"></div>
    <div class="status-bar">
        <div class="time">9:41</div>
        <div class="status-icons">
            <div class="signal"><div></div><div></div><div></div><div></div></div>
        </div>
    </div>

    <div class="app-container">
        <div class="app-header header-layout-center">
            <div class="app-title">ê°ì • í†µê³„</div>
            <div class="app-date">2025ë…„ 4ì›”</div><!--ë‚ ì§œ ê³„ì‚° í•„ìš”-->
        </div>

        <!-- ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ì˜ì—­ -->
        <div class="scrollable-content">
            <div class="toggle-buttons">
                <button id="weeklyBtn" class="active">ì£¼ê°„</button>
                <button id="monthlyBtn">ì›”ê°„</button>
            </div>

            <div class="chart-container">
                <h3 id="chartTitle">ğŸ“… ì£¼ê°„ ê°ì • ë³€í™”</h3>
                <canvas id="emotionChart"></canvas>
            </div>

            <!-- ë¬´ë“œ ì•ˆì •ì„± ì˜ì—­ -->
            <div class="mood-stability">
                <div class="left">
                    <h4>ë¬´ë“œ ì•ˆì •ì„± ì ìˆ˜</h4>
                    <canvas id="moodPie"></canvas>
                    <div class="mood-score-label" id="moodScoreLabel">80</div><!--ì ìˆ˜ ê³„ì‚° í•„ìš”-->
                </div>
                <div class="right">
                    <h4>ê°ì • íŒŒí˜•</h4>
                    <canvas id="moodPulse"></canvas>
                </div>
            </div>

            <div class="mood-trigger-section">
                <!--ë°˜ë³µë¬¸ ì‹œì‘-->
                <h4>ğŸ˜Š ì´ëŸ´ ë•Œ ê¸°ë¶„ì´ ì¢‹ì•„ì¡Œì–´ìš”</h4>
                <div class="trigger-list">
                    <div class="trigger-item">
                        <div class="trigger-image-container">
                            <img src="img/picnic.jpg" alt="ë‚˜ë“¤ì´">
                            <div class="trigger-count">+5</div><!--ìˆ«ì ëˆ„ì  -->
                        </div>
                        <div class="trigger-label">ë‚˜ë“¤ì´</div>
                    </div>
                    <div class="trigger-item">
                        <div class="trigger-image-container">
                            <img src="img/vacation.jpg" alt="íœ´ê°€">
                            <div class="trigger-count">+3</div><!--ìˆ«ì ëˆ„ì  -->
                        </div>
                        <div class="trigger-label">íœ´ê°€</div>
                    </div>
                    <div class="trigger-item">
                        <div class="trigger-image-container">
                            <img src="img/friends.jpg" alt="ì¹œêµ¬ ë§Œë‚¨">
                            <div class="trigger-count">+4</div><!--ìˆ«ì ëˆ„ì  -->
                        </div>
                        <div class="trigger-label">ì¹œêµ¬ ë§Œë‚¨</div>
                    </div>
                </div>
                <!--ë°˜ë³µë¬¸ì¢…ë£Œ-->

                <!--ë°˜ë³µë¬¸ ì‹œì‘-->
                <h4>ğŸ˜ ì´ëŸ´ ë•Œ ê¸°ë¶„ì´ ë‚˜ë¹ ì¡Œì–´ìš”</h4>
                <div class="trigger-list">
                    <div class="trigger-item">
                        <div class="trigger-image-container">
                            <img src="img/work.jpg" alt="ì•¼ê·¼">
                            <div class="trigger-count">+4</div><!--ìˆ«ì ëˆ„ì  -->
                        </div>
                        <div class="trigger-label">ì•¼ê·¼</div>
                    </div>
                    <div class="trigger-item">
                        <div class="trigger-image-container">
                            <img src="img/rain.jpg" alt="ìš°ì¤‘ì¶©í•œ ë‚ ì”¨">
                            <div class="trigger-count">+2</div><!--ìˆ«ì ëˆ„ì  -->
                        </div>
                        <div class="trigger-label">ë¹„ ì˜¤ëŠ” ë‚ </div>
                    </div>
                    <div class="trigger-item">
                        <div class="trigger-image-container">
                            <img src="img/traffic.jpg" alt="ì¶œê·¼ê¸¸ ì •ì²´">
                            <div class="trigger-count">+3</div><!--ìˆ«ì ëˆ„ì  -->
                        </div>
                        <div class="trigger-label">ì¶œê·¼ê¸¸ ì •ì²´</div>
                    </div>
                </div>
                <!--ë°˜ë³µë¬¸ì¢…ë£Œ-->

            </div>

            <button class="new-diary-button">+</button>

            <div class="menu-bar">
                <div class="menu-item">
                    <div class="menu-icon">ğŸ </div>
                    <div>í™ˆ</div>
                </div>
                <div class="menu-item active">
                    <div class="menu-icon">ğŸ“Š</div>
                    <div>í†µê³„</div>
                </div>
                <div class="menu-item">
                    <div class="menu-icon">ğŸ“†</div>
                    <div>ë‹¬ë ¥</div>
                </div>
                <div class="menu-item">
                    <div class="menu-icon">âš™ï¸</div>
                    <div>ì„¤ì •</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const weeklyData = {
            labels: ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'],
            /*['í–‰ë³µ', 'ë§Œì¡±', 'ì„¤ë ˜', 'í‰ì˜¨', 'ë¶ˆì•ˆ', 'ìŠ¬í””', 'ë¶„ë…¸']*/
            datasets: [{
                label: 'ê°ì • ì ìˆ˜',
                data: [60, 70, 50, 80, 65, 75, 90],
                backgroundColor: ['#f9c6c9','#fdd7aa','#fef4b0','#b1d7b4','#a3c9f9','#cbb2ef','#f8a5d6'],
                borderRadius: 12
            }]
        };

        const monthlyData = {
            labels: ['1ì£¼ì°¨', '2ì£¼ì°¨', '3ì£¼ì°¨', '4ì£¼ì°¨'],
            datasets: [{
                label: 'ê°ì • ì ìˆ˜ í‰ê· ',
                data: [65, 70, 75, 60],
                borderColor: '#7b8cde',
                backgroundColor: 'rgba(123, 140, 222, 0.2)',
                tension: 0.3,
                fill: true,
                pointBackgroundColor: '#7b8cde',
                pointRadius: 5
            }]
        };

        const config = {
            type: 'bar',
            data: weeklyData,
            options: {
                responsive: true,
                plugins: {
                    legend: { display: false },
                    tooltip: { callbacks: { label: ctx => `ê°ì • ì ìˆ˜: ${ctx.raw}` } }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: { stepSize: 20, color: '#7c8ba1' },
                        grid: { color: 'rgba(200,200,200,0.1)' }
                    },
                    x: { ticks: { color: '#7c8ba1' } }
                }
            }
        };

        const ctx = document.getElementById('emotionChart').getContext('2d');
        let chart = new Chart(ctx, config);

        document.getElementById('weeklyBtn').addEventListener('click', () => {
            chart.config.type = 'bar';
            chart.data = weeklyData;
            chart.update();
            document.getElementById('chartTitle').textContent = 'ğŸ“… ì£¼ê°„ ê°ì • ë³€í™”';
            toggleActive('weeklyBtn', 'monthlyBtn');
        });

        document.getElementById('monthlyBtn').addEventListener('click', () => {
            chart.config.type = 'line';
            chart.data = monthlyData;
            chart.update();
            document.getElementById('chartTitle').textContent = 'ğŸ—“ï¸ ì›”ê°„ ê°ì • ë³€í™”';
            toggleActive('monthlyBtn', 'weeklyBtn');
        });

        function toggleActive(activeId, inactiveId) {
            document.getElementById(activeId).classList.add('active');
            document.getElementById(inactiveId).classList.remove('active');
        }

        // ë¬´ë“œ ì•ˆì •ì„± ì›í˜• ê·¸ë˜í”„
        const moodScore = 80;
        new Chart(document.getElementById('moodPie'), {
            type: 'doughnut',
            data: {
                labels: ['ì•ˆì •ì„±', 'ë³€ë™ì„±'],
                datasets: [{
                    data: [moodScore, 100 - moodScore],
                    backgroundColor: ['#7b8cde', '#e0e6ff'],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                cutout: '70%',
                plugins: {
                    legend: { display: false }
                }
            }
        });
        document.getElementById('moodScoreLabel').textContent = `${moodScore}`;

        // ë¬´ë“œ íŒŒí˜• ê·¸ë˜í”„
        new Chart(document.getElementById('moodPulse'), {
            type: 'line',
            data: {
                labels: ['1', '2', '3', '4', '5', '6', '7'],
                datasets: [{
                    label: 'ê°ì • íŒŒí˜•',
                    data: [60, 80, 40, 70, 50, 90, 60],
                    borderColor: '#ff6b81',
                    backgroundColor: 'transparent',
                    tension: 0.4,
                    pointRadius: 0,
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                plugins: { legend: { display: false } },
                scales: {
                    y: { display: false },
                    x: { display: false }
                }
            }
        });
    </script>
</body>
</html>
